<html>
    <head>
        <!-- Include CARTO VL JS -->
        <script src="https://libs.cartocdn.com/carto-vl/v0.7.0/carto-vl.js"></script>
        <!-- Include Mapbox GL JS -->
        <script src="https://libs.cartocdn.com/mapbox-gl/v0.48.0-carto1/mapbox-gl.js"></script>
        <!-- Include Mapbox GL CSS -->
        <link href="https://libs.cartocdn.com/mapbox-gl/v0.48.0-carto1/mapbox-gl.css" rel="stylesheet" />
        <style>
            body {
                margin: 0;
            }
            #map {
                position: absolute;
                height: 100%;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <div id="map"></div>
        <script>
            const map = new mapboxgl.Map({
                container: 'map',
                style: 'https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json',
                center: [0, 30],
                zoom: 2,
                dragRotate: false
            });
            carto.setDefaultAuth({
                user: 'cartovl',
                apiKey: 'default_public'
            });
            const source = new carto.source.Dataset('ne_10m_populated_places_simple');
            const s = carto.expressions;
            const viz = new carto.Viz({
                variables: {
                    size: s.div(s.sqrt(s.prop('pop_min')),100)
                },
                width: s.var('size'),
                //color: s.ramp(s.prop('worldcity'), s.palettes.PRISM),
                color: s.ramp(s.buckets(s.prop('worldcity'), [1, 0]), s.palettes.PRISM),
                strokeWidth: 0
            });
            const layer = new carto.Layer('layer', source, viz);
            layer.addTo(map);
        </script>
    </body>
</html>
